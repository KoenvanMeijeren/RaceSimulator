<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>E:\Development\C#\RaceSimulator\RaceSimulator\CVisualization.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using System.Threading.Tasks;
using Model;

namespace RaceSimulator
{

    public enum Directions
    {
        North = 0,
        East = 1,
        South = 2,
        West = 3
    }

    public static class CVisualization
    {

        private static Directions _direction = Directions.East;

        private static readonly int
            _symbolSpaces = 4,
            _cursorStartLeftPosition = 45,
            _cursorStartTopPosition = 5;

        private static int
            _cursorLeftPosition = _cursorStartLeftPosition,
            _cursorTopPosition = _cursorStartTopPosition;

        #region graphics
        private static readonly string[] 
            FinishHorizontal = { &quot;----&quot;, &quot;  # &quot;, &quot;  # &quot;, &quot;----&quot; },
            FinishVertical = { &quot;|  |&quot;, &quot;|##|&quot;, &quot;|  |&quot;, &quot;|  |&quot; },

            StartGridHorizontal = { &quot;----&quot;, &quot;  | &quot;, &quot;  | &quot;, &quot;----&quot; },
            StartGridVertical = { &quot;|  |&quot;, &quot;|--|&quot;, &quot;|  |&quot;, &quot;|  |&quot; },

            StraightHorizontal = {&quot;----&quot;, &quot;    &quot;, &quot;    &quot;, &quot;----&quot; },
            StraightVertical = { &quot;|  |&quot;, &quot;|  |&quot;, &quot;|  |&quot;, &quot;|  |&quot; },

            RightCornerHorizontalRightwardsDownwards = { &quot;|  \\&quot;, &quot;|   &quot;, &quot;\\   &quot;, &quot; \\--&quot; },
            RightCornerHorizontalRightwardsUpwards = { &quot;|  \\&quot;, &quot;|   &quot;, &quot;\\   &quot;, &quot; \\--&quot; },
            RightCornerVerticalRightwardsDownwards = { &quot; /--&quot;, &quot;/   &quot;, &quot;|   &quot;, &quot;|  /&quot; },
            RightCornerVerticalRightwardsUpwards = { &quot;|  /&quot;, &quot;|   &quot;, &quot;/   &quot;, &quot; /--&quot; },

            LeftCornerHorizontalLeftwardsUpwards = { &quot; /--&quot;, &quot;/   &quot;, &quot;|   &quot;, &quot;|  /&quot; },
            LeftCornerVerticalLeftwardsUpwards = { &quot;|  \\&quot;, &quot;|   &quot;, &quot;\\   &quot;, &quot; \\--&quot; },
            LeftCornerHorizontalRightwardsDownwards = { &quot;--\\ &quot;, &quot;   \\&quot;, &quot;   |&quot;, &quot;\\  |&quot; },
            LeftCornerVerticalRightwardsDownwards = { &quot;/  |&quot;, &quot;   |&quot;, &quot;   /&quot;, &quot;--/ &quot; };
        #endregion

        public static void Initialize()
        {
            
        }

        public static void DrawTrack(Track track)
        {
            Console.BackgroundColor = ConsoleColor.Blue;
            Console.ForegroundColor = ConsoleColor.White;
            Console.Clear();

            Console.SetCursorPosition(CenteredTextCursorStartPosition(track.Name), 1);
            Console.WriteLine(track.Name);

            DrawRoundTestTrack();
        }

        private static bool DirectionIsVertical()
        {
            return CVisualization._direction is Directions.South or Directions.North;
        }

        private static bool DirectionIsHorizontal()
        {
            return CVisualization._direction is Directions.West or Directions.East;
        }

        private static void DrawStraight()
        {
            if (CVisualization.DirectionIsVertical())
            {
                CVisualization.Draw(CVisualization.StraightVertical);
                return;
            }

            CVisualization.Draw(CVisualization.StraightHorizontal);
        }

        private static void DrawStartGrid()
        {
            if (CVisualization.DirectionIsVertical())
            {
                CVisualization.Draw(CVisualization.StartGridVertical);
                return;
            }

            CVisualization.Draw(CVisualization.StartGridHorizontal);
        }

        private static void DrawFinish()
        {
            if (CVisualization.DirectionIsVertical())
            {
                CVisualization.Draw(CVisualization.FinishVertical);
                return;
            }

            CVisualization.Draw(CVisualization.FinishHorizontal);
        }

        private static void DrawLeftCornerDownwardsClockwise()
        {
            if (CVisualization.DirectionIsVertical())
            {
                CVisualization.DrawLeftCorner(CVisualization.LeftCornerVerticalRightwardsDownwards, true);
                return;
            }

            CVisualization.DrawLeftCorner(CVisualization.LeftCornerHorizontalRightwardsDownwards, true);
        }

        private static void DrawLeftCornerDownwardsCounterClockwise()
        {
            if (CVisualization.DirectionIsVertical())
            {
                CVisualization.DrawLeftCorner(CVisualization.LeftCornerVerticalRightwardsDownwards, false);
                return;
            }

            CVisualization.DrawLeftCorner(CVisualization.LeftCornerHorizontalRightwardsDownwards, false);
        }

        private static void DrawRightCornerDownwardsClockwise()
        {
            if (CVisualization.DirectionIsVertical())
            {
                CVisualization.DrawRightCorner(CVisualization.RightCornerVerticalRightwardsDownwards, true);
                return;
            }

            CVisualization.DrawRightCorner(CVisualization.RightCornerHorizontalRightwardsDownwards, true);
        }

        private static void DrawRightCornerDownwardsCounterClockwise()
        {
            if (CVisualization.DirectionIsVertical())
            {
                CVisualization.DrawRightCorner(CVisualization.RightCornerVerticalRightwardsDownwards, false);
                return;
            }

            CVisualization.DrawRightCorner(CVisualization.RightCornerHorizontalRightwardsDownwards, false);
        }

        private static void DrawRightCornerUpwardsClockwise()
        {
            if (CVisualization.DirectionIsVertical())
            {
                CVisualization.DrawRightCorner(CVisualization.RightCornerVerticalRightwardsUpwards, true);
                return;
            }

            CVisualization.DrawRightCorner(CVisualization.RightCornerHorizontalRightwardsUpwards, true);
        }

        private static void DrawRightCornerUpwardsCounterClockwise()
        {
            if (CVisualization.DirectionIsVertical())
            {
                CVisualization.DrawRightCorner(CVisualization.RightCornerVerticalRightwardsUpwards, false);
                return;
            }

            CVisualization.DrawRightCorner(CVisualization.RightCornerHorizontalRightwardsUpwards, false);
        }

        private static void Draw(string[] symbols)
        {
            if (CVisualization._direction == Directions.East || CVisualization._direction == Directions.West || CVisualization._direction == Directions.South)
            {
                DrawDownwards(symbols);
            }
            else
            {
                DrawUpwards(symbols);
            }

            switch (CVisualization._direction)
            {
                case Directions.East:
                    CVisualization._cursorTopPosition -= CVisualization._symbolSpaces;
                    CVisualization._cursorLeftPosition += CVisualization._symbolSpaces;
                    break;
                case Directions.West:
                    CVisualization._cursorTopPosition -= CVisualization._symbolSpaces;
                    CVisualization._cursorLeftPosition -= CVisualization._symbolSpaces;
                    break;
                case Directions.South:

                    break;
            }

            CVisualization.WriteLine(&quot;test&quot;);
        }

        private static void DrawLeftCorner(string[] symbols, bool clockwise)
        {
            if (CVisualization._direction == Directions.East || CVisualization._direction == Directions.West)
            {
                DrawDownwards(symbols);
                CVisualization._direction = Directions.South;
            }
            else if (CVisualization._direction == Directions.South)
            {
                DrawDownwards(symbols);
                CVisualization._direction = clockwise ? Directions.West : Directions.East;
            }

            switch (CVisualization._direction)
            {
                case Directions.East:
                    CVisualization._cursorTopPosition -= CVisualization._symbolSpaces;
                    CVisualization._cursorLeftPosition += CVisualization._symbolSpaces;
                    break;
                case Directions.West:
                    CVisualization._cursorTopPosition -= CVisualization._symbolSpaces;
                    CVisualization._cursorLeftPosition -= CVisualization._symbolSpaces;
                    break;
                case Directions.South:
                    // do nothing
                    break;
            }

            CVisualization.WriteLine(&quot;test&quot;);
        }

        private static void DrawRightCorner(string[] symbols, bool clockwise)
        {
            if (CVisualization._direction == Directions.East || CVisualization._direction == Directions.West)
            {
                DrawDownwards(symbols);
                CVisualization._direction = Directions.North;
            }
            else if (CVisualization._direction == Directions.North)
            {
                DrawUpwards(symbols);
                CVisualization._direction = clockwise ? Directions.East : Directions.West;
            }

            switch (CVisualization._direction)
            {
                case Directions.East:
                    CVisualization._cursorTopPosition += 1;
                    CVisualization._cursorLeftPosition += CVisualization._symbolSpaces;
                    break;
                case Directions.West:

                    break;
                case Directions.North:
                    CVisualization._cursorTopPosition -= CVisualization._symbolSpaces + 1;
                    break;
                case Directions.South:
                    // do nothing
                    break;
            }

            CVisualization.WriteLine(&quot;test&quot;);
        }

        private static void DrawDownwards(string[] symbols)
        {
            foreach (string symbol in symbols)
            {
                CVisualization.WriteLine(symbol);
                CVisualization.MoveCursorDownwards();
            }
        }

        private static void DrawUpwards(string[] symbols)
        {
            foreach (string symbol in symbols)
            {
                CVisualization.WriteLine(symbol);
                CVisualization.MoveCursorUpwards();
            }
        }

        private static void MoveCursorLeftwards()
        {
            CVisualization._cursorLeftPosition--;
        }

        private static void MoveCursorRightwards()
        {
            CVisualization._cursorLeftPosition++;
        }

        private static void MoveCursorUpwards()
        {
            CVisualization._cursorTopPosition--;
        }

        private static void MoveCursorDownwards()
        {
            CVisualization._cursorTopPosition++;
        }

        private static void WriteLine(string symbol)
        {
            Console.SetCursorPosition(CVisualization._cursorLeftPosition, CVisualization._cursorTopPosition);
            Console.WriteLine(symbol);
        }

        private static int CenteredTextCursorStartPosition(string text)
        {
            return (Console.WindowWidth / 2) - (text.Length / 2);
        }

        private static void DrawRoundTestTrack()
        {
            CVisualization.DrawStraight();
            CVisualization.DrawStartGrid();
            CVisualization.DrawStraight();
            CVisualization.DrawFinish();
            CVisualization.DrawStraight();

            CVisualization.DrawLeftCornerDownwardsClockwise();
            CVisualization.DrawStraight();
            CVisualization.DrawFinish();
            CVisualization.DrawStartGrid();

            CVisualization.DrawLeftCornerDownwardsClockwise();
            CVisualization.DrawStraight();
            CVisualization.DrawStartGrid();
            CVisualization.DrawStraight();
            CVisualization.DrawFinish();
            CVisualization.DrawStraight();
            CVisualization.DrawStraight();

            CVisualization.DrawRightCornerDownwardsClockwise();
            CVisualization.DrawStraight();
            CVisualization.DrawFinish();
            CVisualization.DrawStartGrid();

            CVisualization.DrawRightCornerUpwardsClockwise();
            CVisualization.DrawStraight();
        }

    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[23,9,23,64,0],[25,9,26,30,0],[27,13,27,42,0],[28,13,28,40,0],[30,9,31,59,0],[32,13,32,57,0],[35,9,36,66,0],[37,13,37,64,0],[39,13,39,69,0],[40,13,40,67,0],[42,13,42,67,0],[43,13,43,66,0],[45,13,45,93,0],[46,13,46,91,0],[47,13,47,88,0],[48,13,48,86,0],[50,13,50,86,0],[51,13,51,87,0],[52,13,52,92,0],[53,13,53,87,0],[57,9,57,10,0],[59,9,59,10,0],[62,9,62,10,0],[63,13,63,57,0],[64,13,64,58,0],[65,13,65,29,0],[67,13,67,87,0],[68,13,68,43,0],[70,13,70,34,0],[71,9,71,10,0],[74,9,74,10,0],[75,13,75,86,0],[76,9,76,10,0],[79,9,79,10,0],[80,13,80,84,0],[81,9,81,10,0],[84,9,84,10,0],[85,13,85,54,0],[86,13,86,14,0],[87,17,87,70,0],[88,17,88,24,0],[91,13,91,68,0],[92,9,92,10,0],[95,9,95,10,0],[96,13,96,54,0],[97,13,97,14,0],[98,17,98,71,0],[99,17,99,24,0],[102,13,102,69,0],[103,9,103,10,0],[106,9,106,10,0],[107,13,107,54,0],[108,13,108,14,0],[109,17,109,68,0],[110,17,110,24,0],[113,13,113,66,0],[114,9,114,10,0],[117,9,117,10,0],[118,13,118,54,0],[119,13,119,14,0],[120,17,120,107,0],[121,17,121,24,0],[124,13,124,105,0],[125,9,125,10,0],[128,9,128,10,0],[129,13,129,54,0],[130,13,130,14,0],[131,17,131,108,0],[132,17,132,24,0],[135,13,135,106,0],[136,9,136,10,0],[139,9,139,10,0],[140,13,140,54,0],[141,13,141,14,0],[142,17,142,109,0],[143,17,143,24,0],[146,13,146,107,0],[147,9,147,10,0],[150,9,150,10,0],[151,13,151,54,0],[152,13,152,14,0],[153,17,153,110,0],[154,17,154,24,0],[157,13,157,108,0],[158,9,158,10,0],[161,9,161,10,0],[162,13,162,54,0],[163,13,163,14,0],[164,17,164,107,0],[165,17,165,24,0],[168,13,168,105,0],[169,9,169,10,0],[172,9,172,10,0],[173,13,173,54,0],[174,13,174,14,0],[175,17,175,108,0],[176,17,176,24,0],[179,13,179,106,0],[180,9,180,10,0],[183,9,183,10,0],[184,13,184,159,0],[185,13,185,14,0],[186,17,186,40,0],[187,13,187,14,0],[189,13,189,14,0],[190,17,190,38,0],[191,13,191,14,0],[193,13,193,47,0],[196,21,196,87,0],[197,21,197,88,0],[198,21,198,27,0],[200,21,200,87,0],[201,21,201,88,0],[202,21,202,27,0],[205,21,205,27,0],[208,13,208,46,0],[209,9,209,10,0],[212,9,212,10,0],[213,13,213,110,0],[214,13,214,14,0],[215,17,215,40,0],[216,17,216,62,0],[217,13,217,14,0],[218,18,218,68,0],[219,13,219,14,0],[220,17,220,40,0],[221,17,221,91,0],[222,13,222,14,0],[224,13,224,47,0],[227,21,227,87,0],[228,21,228,88,0],[229,21,229,27,0],[231,21,231,87,0],[232,21,232,88,0],[233,21,233,27,0],[236,21,236,27,0],[239,13,239,46,0],[240,9,240,10,0],[243,9,243,10,0],[244,13,244,110,0],[245,13,245,14,0],[246,17,246,40,0],[247,17,247,62,0],[248,13,248,14,0],[249,18,249,68,0],[250,13,250,14,0],[251,17,251,38,0],[252,17,252,91,0],[253,13,253,14,0],[255,13,255,47,0],[258,21,258,60,0],[259,21,259,88,0],[260,21,260,27,0],[263,21,263,27,0],[265,21,265,91,0],[266,21,266,27,0],[269,21,269,27,0],[272,13,272,46,0],[273,9,273,10,0],[276,9,276,10,0],[277,13,277,20,0],[277,22,277,35,0],[277,36,277,38,0],[277,39,277,46,0],[278,13,278,14,0],[279,17,279,50,0],[280,17,280,54,0],[281,13,281,14,0],[282,9,282,10,0],[285,9,285,10,0],[286,13,286,20,0],[286,22,286,35,0],[286,36,286,38,0],[286,39,286,46,0],[287,13,287,14,0],[288,17,288,50,0],[289,17,289,52,0],[290,13,290,14,0],[291,9,291,10,0],[294,9,294,10,0],[295,13,295,50,0],[296,9,296,10,0],[299,9,299,10,0],[300,13,300,50,0],[301,9,301,10,0],[304,9,304,10,0],[305,13,305,49,0],[306,9,306,10,0],[309,9,309,10,0],[310,13,310,49,0],[311,9,311,10,0],[314,9,314,10,0],[315,13,315,110,0],[316,13,316,39,0],[317,9,317,10,0],[320,9,320,10,0],[321,13,321,66,0],[322,9,322,10,0],[325,9,325,10,0],[326,13,326,43,0],[327,13,327,44,0],[328,13,328,43,0],[329,13,329,41,0],[330,13,330,43,0],[332,13,332,63,0],[333,13,333,43,0],[334,13,334,41,0],[335,13,335,44,0],[337,13,337,63,0],[338,13,338,43,0],[339,13,339,44,0],[340,13,340,43,0],[341,13,341,41,0],[342,13,342,43,0],[343,13,343,43,0],[345,13,345,64,0],[346,13,346,43,0],[347,13,347,41,0],[348,13,348,44,0],[350,13,350,62,0],[351,13,351,43,0],[352,9,352,10,0]]);
    </script>
  </body>
</html>